{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { getFirestore, collection, addDoc, serverTimestamp } from 'firebase/firestore';\nexport var generateReferralCode = function () {\n  var _ref = _asyncToGenerator(function* (userId) {\n    try {\n      var db = getFirestore();\n      var code = generateUniqueCode();\n      yield addDoc(collection(db, 'referralCodes'), {\n        code: code,\n        createdBy: userId,\n        createdAt: serverTimestamp(),\n        expiresAt: new Date(Date.now() + 48 * 60 * 60 * 1000),\n        used: false,\n        usedBy: null\n      });\n      return code;\n    } catch (error) {\n      console.error('Error generating referral code:', error);\n      throw error;\n    }\n  });\n  return function generateReferralCode(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nfunction generateUniqueCode() {\n  var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n  var segments = 3;\n  var segmentLength = 4;\n  var code = '';\n  for (var i = 0; i < segments; i++) {\n    for (var j = 0; j < segmentLength; j++) {\n      code += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    if (i < segments - 1) code += '-';\n  }\n  return code;\n}","map":{"version":3,"names":["getFirestore","collection","addDoc","serverTimestamp","generateReferralCode","_ref","_asyncToGenerator","userId","db","code","generateUniqueCode","createdBy","createdAt","expiresAt","Date","now","used","usedBy","error","console","_x","apply","arguments","chars","segments","segmentLength","i","j","charAt","Math","floor","random","length"],"sources":["/Users/almorris/cursor-test/frontend/src/utils/referralUtils.js"],"sourcesContent":["import { getFirestore, collection, addDoc, serverTimestamp } from 'firebase/firestore';\n\nexport const generateReferralCode = async (userId) => {\n  try {\n    const db = getFirestore();\n    \n    // Generate a unique code\n    const code = generateUniqueCode();\n    \n    // Save to Firestore with expiration\n    await addDoc(collection(db, 'referralCodes'), {\n      code,\n      createdBy: userId,\n      createdAt: serverTimestamp(),\n      expiresAt: new Date(Date.now() + 48 * 60 * 60 * 1000), // 48 hours\n      used: false,\n      usedBy: null\n    });\n    \n    return code;\n  } catch (error) {\n    console.error('Error generating referral code:', error);\n    throw error;\n  }\n};\n\nfunction generateUniqueCode() {\n  // Generate a code format: XXXX-XXXX-XXXX\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n  const segments = 3;\n  const segmentLength = 4;\n  \n  let code = '';\n  for (let i = 0; i < segments; i++) {\n    for (let j = 0; j < segmentLength; j++) {\n      code += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    if (i < segments - 1) code += '-';\n  }\n  \n  return code;\n} "],"mappings":";AAAA,SAASA,YAAY,EAAEC,UAAU,EAAEC,MAAM,EAAEC,eAAe,QAAQ,oBAAoB;AAEtF,OAAO,IAAMC,oBAAoB;EAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,WAAOC,MAAM,EAAK;IACpD,IAAI;MACF,IAAMC,EAAE,GAAGR,YAAY,CAAC,CAAC;MAGzB,IAAMS,IAAI,GAAGC,kBAAkB,CAAC,CAAC;MAGjC,MAAMR,MAAM,CAACD,UAAU,CAACO,EAAE,EAAE,eAAe,CAAC,EAAE;QAC5CC,IAAI,EAAJA,IAAI;QACJE,SAAS,EAAEJ,MAAM;QACjBK,SAAS,EAAET,eAAe,CAAC,CAAC;QAC5BU,SAAS,EAAE,IAAIC,IAAI,CAACA,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC;QACrDC,IAAI,EAAE,KAAK;QACXC,MAAM,EAAE;MACV,CAAC,CAAC;MAEF,OAAOR,IAAI;IACb,CAAC,CAAC,OAAOS,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;MACvD,MAAMA,KAAK;IACb;EACF,CAAC;EAAA,gBAtBYd,oBAAoBA,CAAAgB,EAAA;IAAA,OAAAf,IAAA,CAAAgB,KAAA,OAAAC,SAAA;EAAA;AAAA,GAsBhC;AAED,SAASZ,kBAAkBA,CAAA,EAAG;EAE5B,IAAMa,KAAK,GAAG,sCAAsC;EACpD,IAAMC,QAAQ,GAAG,CAAC;EAClB,IAAMC,aAAa,GAAG,CAAC;EAEvB,IAAIhB,IAAI,GAAG,EAAE;EACb,KAAK,IAAIiB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,QAAQ,EAAEE,CAAC,EAAE,EAAE;IACjC,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,aAAa,EAAEE,CAAC,EAAE,EAAE;MACtClB,IAAI,IAAIc,KAAK,CAACK,MAAM,CAACC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAGR,KAAK,CAACS,MAAM,CAAC,CAAC;IAChE;IACA,IAAIN,CAAC,GAAGF,QAAQ,GAAG,CAAC,EAAEf,IAAI,IAAI,GAAG;EACnC;EAEA,OAAOA,IAAI;AACb","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}