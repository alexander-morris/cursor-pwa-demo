{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { colors } from \"../../utils/colors\";\nimport { signInWithGoogle, handleRedirectResult } from \"../../services/auth\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function GoogleSignIn(_ref) {\n  var onSignIn = _ref.onSignIn,\n    onClose = _ref.onClose;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    error = _useState2[0],\n    setError = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isRedirecting = _useState4[0],\n    setIsRedirecting = _useState4[1];\n  useEffect(function () {\n    handleRedirectResult().then(function (result) {\n      if (result) {\n        onSignIn(result);\n      }\n    });\n  }, []);\n  var handleSignIn = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        setError(null);\n        setIsRedirecting(false);\n        console.log('Initiating Google sign in...');\n        var userData = yield signInWithGoogle();\n        console.log('Google sign-in successful:', userData);\n        if (userData) {\n          console.log('Calling onSignIn with userData:', userData);\n          onSignIn(userData);\n        } else {\n          setIsRedirecting(true);\n        }\n      } catch (error) {\n        console.error('Sign in error:', error);\n        setError(error.message);\n      }\n    });\n    return function handleSignIn() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return _jsx(View, {\n    style: styles.overlay,\n    children: _jsxs(View, {\n      style: styles.modal,\n      children: [_jsx(Text, {\n        style: styles.title,\n        children: \"Save Your Progress\"\n      }), _jsx(Text, {\n        style: styles.description,\n        children: \"Sign in with Google to save your conversation history and continue your journey.\"\n      }), error && _jsx(Text, {\n        style: styles.errorText,\n        children: error\n      }), isRedirecting && _jsx(Text, {\n        style: styles.redirectText,\n        children: \"Redirecting to Google Sign In...\"\n      }), _jsx(TouchableOpacity, {\n        style: styles.googleButton,\n        onPress: handleSignIn,\n        disabled: isRedirecting,\n        children: _jsx(Text, {\n          style: styles.googleButtonText,\n          children: \"Sign in with Google\"\n        })\n      }), _jsx(TouchableOpacity, {\n        style: styles.skipButton,\n        onPress: onClose,\n        disabled: isRedirecting,\n        children: _jsx(Text, {\n          style: styles.skipButtonText,\n          children: \"Continue without signing in\"\n        })\n      })]\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  overlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0,0,0,0.7)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 1000\n  },\n  modal: {\n    backgroundColor: colors.background.secondary,\n    padding: 24,\n    borderRadius: 12,\n    width: '90%',\n    maxWidth: 400,\n    alignItems: 'center'\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: colors.text.primary,\n    marginBottom: 16\n  },\n  description: {\n    fontSize: 16,\n    color: colors.text.secondary,\n    textAlign: 'center',\n    marginBottom: 24\n  },\n  googleButton: {\n    backgroundColor: '#4285F4',\n    paddingHorizontal: 24,\n    paddingVertical: 12,\n    borderRadius: 6,\n    width: '100%',\n    alignItems: 'center',\n    marginBottom: 16\n  },\n  googleButtonText: {\n    color: colors.text.inverse,\n    fontSize: 16,\n    fontWeight: 'bold'\n  },\n  skipButton: {\n    paddingVertical: 12\n  },\n  skipButtonText: {\n    color: colors.text.tertiary,\n    fontSize: 14\n  },\n  errorText: {\n    color: colors.error,\n    marginBottom: 16,\n    textAlign: 'center'\n  },\n  redirectText: {\n    color: colors.text.secondary,\n    marginBottom: 16,\n    textAlign: 'center'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","View","Text","TouchableOpacity","StyleSheet","colors","signInWithGoogle","handleRedirectResult","jsx","_jsx","jsxs","_jsxs","GoogleSignIn","_ref","onSignIn","onClose","_useState","_useState2","_slicedToArray","error","setError","_useState3","_useState4","isRedirecting","setIsRedirecting","then","result","handleSignIn","_ref2","_asyncToGenerator","console","log","userData","message","apply","arguments","style","styles","overlay","children","modal","title","description","errorText","redirectText","googleButton","onPress","disabled","googleButtonText","skipButton","skipButtonText","create","position","top","left","right","bottom","backgroundColor","justifyContent","alignItems","zIndex","background","secondary","padding","borderRadius","width","maxWidth","fontSize","fontWeight","color","text","primary","marginBottom","textAlign","paddingHorizontal","paddingVertical","inverse","tertiary"],"sources":["/Users/almorris/cursor-test/frontend/src/components/Auth/GoogleSignIn.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet } from 'react-native';\nimport { colors } from '../../utils/colors';\nimport { signInWithGoogle, handleRedirectResult } from '../../services/auth';\n\nexport default function GoogleSignIn({ onSignIn, onClose }) {\n  const [error, setError] = useState(null);\n  const [isRedirecting, setIsRedirecting] = useState(false);\n\n  useEffect(() => {\n    // Check for redirect result when component mounts\n    handleRedirectResult().then(result => {\n      if (result) {\n        onSignIn(result);\n      }\n    });\n  }, []);\n\n  const handleSignIn = async () => {\n    try {\n      setError(null);\n      setIsRedirecting(false);\n      console.log('Initiating Google sign in...');\n      const userData = await signInWithGoogle();\n      console.log('Google sign-in successful:', userData);\n      if (userData) {\n        console.log('Calling onSignIn with userData:', userData);\n        onSignIn(userData);\n      } else {\n        setIsRedirecting(true);\n      }\n    } catch (error) {\n      console.error('Sign in error:', error);\n      setError(error.message);\n    }\n  };\n\n  return (\n    <View style={styles.overlay}>\n      <View style={styles.modal}>\n        <Text style={styles.title}>Save Your Progress</Text>\n        <Text style={styles.description}>\n          Sign in with Google to save your conversation history and continue your journey.\n        </Text>\n        \n        {error && (\n          <Text style={styles.errorText}>{error}</Text>\n        )}\n        \n        {isRedirecting && (\n          <Text style={styles.redirectText}>\n            Redirecting to Google Sign In...\n          </Text>\n        )}\n        \n        <TouchableOpacity \n          style={styles.googleButton}\n          onPress={handleSignIn}\n          disabled={isRedirecting}\n        >\n          <Text style={styles.googleButtonText}>Sign in with Google</Text>\n        </TouchableOpacity>\n        \n        <TouchableOpacity \n          style={styles.skipButton}\n          onPress={onClose}\n          disabled={isRedirecting}\n        >\n          <Text style={styles.skipButtonText}>Continue without signing in</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  overlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0,0,0,0.7)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 1000\n  },\n  modal: {\n    backgroundColor: colors.background.secondary,\n    padding: 24,\n    borderRadius: 12,\n    width: '90%',\n    maxWidth: 400,\n    alignItems: 'center'\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: colors.text.primary,\n    marginBottom: 16\n  },\n  description: {\n    fontSize: 16,\n    color: colors.text.secondary,\n    textAlign: 'center',\n    marginBottom: 24\n  },\n  googleButton: {\n    backgroundColor: '#4285F4',\n    paddingHorizontal: 24,\n    paddingVertical: 12,\n    borderRadius: 6,\n    width: '100%',\n    alignItems: 'center',\n    marginBottom: 16\n  },\n  googleButtonText: {\n    color: colors.text.inverse,\n    fontSize: 16,\n    fontWeight: 'bold'\n  },\n  skipButton: {\n    paddingVertical: 12\n  },\n  skipButtonText: {\n    color: colors.text.tertiary,\n    fontSize: 14\n  },\n  errorText: {\n    color: colors.error,\n    marginBottom: 16,\n    textAlign: 'center'\n  },\n  redirectText: {\n    color: colors.text.secondary,\n    marginBottom: 16,\n    textAlign: 'center'\n  }\n}); "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}